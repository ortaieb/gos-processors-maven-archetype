syntax = "proto3";

package client;
option java_package = "com.orta.gos.model";

message EmptyBody {}

message StringBody {
  string body = 1;
}
message BinaryBody {
  bytes body = 1;
}

enum ProcessStatus {
  PROCESS_STATUS_UNSPECIFIED = 0;
  OK = 1;
  VALIDATION_ERROR = 2;
  PROCESS_ERROR = 3;
}

message Payload {
  string uuid = 1;
  int64 creation_timestamp = 2;
  map<string, string> attributes = 3;
  oneof body {
    EmptyBody empty_body = 4;
    StringBody string_body = 5;
    BinaryBody binary_body = 6;
  }
}

message ProcessInput {
  repeated Payload payloads = 1;
  map<string, string> attributes = 2;
}

message ProcessOutcome {
  Payload outputPayload = 1;
  map<string,string> headers = 2;
  ProcessStatus status = 3;
}

service Process {
  rpc Process(ProcessInput) returns (ProcessOutcome) {}
}
